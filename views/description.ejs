<!DOCTYPE html>
<html lang="en">

<head>
    <title>part description</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="/css/description.css" rel="stylesheet">
</head>

<body>
    <div class="desc">
        <!-- <i class="back_button">back</i> -->
        <svg class="back_button" width="24" height="24" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd"
            clip-rule="evenodd" onclick="cataloguePage()">
            <path d="M2.117 12l7.527 6.235-.644.765-9-7.521 9-7.479.645.764-7.529 6.236h21.884v1h-21.883z" />
        </svg>
        <div class="item">
            <section class="image">
                <img src="/images/<%= part.path %>" />
            </section>
            <section class="texts">
                <p>
                    Name:
                    <span>
                        <%= part.partName %>
                    </span>
                </p>
                <p>
                    family:
                    <span>
                        <%= part.partFamily %>
                    </span>
                </p>
                <p>
                    Number:
                    <span>
                        <%= part.partNumber %>
                    </span>
                </p>
                <p>
                    Description:<br />
                    <span class="tx">
                        <%= part.description %>
                    </span>
                </p>
            </section>
            <form onsubmit="delPart(event, '<%= part._id %>')">
                <button type="submit">remove</button>
            </form>

        </div>
    </div>
    <script>
        function getSession() {
            session = localStorage.getItem("sK");
            return session;
        }
        const delPart = async (e, id) => {
            try {
                e.preventDefault();
                await fetch(`/catalogue/part/${id}`, {
                    method: "DELETE"
                })
                    .then(res => {
                        return res.json();
                    })
                    .then(data => {
                        if (data.success) {
                            const session = getSession();
                            location.href = '/catalogue?sk=' + session;
                        }
                    })
                    .catch(err => {
                        console.log(err)
                    })
            } catch (err) {
                console.log(err);
            }
        }
        function cataloguePage() {
            const session = getSession();
            location.href = '/catalogue?sk=' + session;
        }
    </script>
</body>

</html>
